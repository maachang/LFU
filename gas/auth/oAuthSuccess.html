<!DOCTYPE HTML SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
<head>
<meta charset="UTF-8" />
<!-- robot(googleのクローラー関連)は off.-->
<meta name="robots" content="noindex">
<meta name="description" content="">
<meta name="keywords" content="">

<!-- ブラウザで表示されるタイトル. -->
<title>oauthError</title>

<meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8"/>
<meta http-equiv="content-style-type" content="text/css; charset=utf-8" />
<meta http-equiv="content-script-type" content="text/javascript; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta http-equiv="Cache-Control" content="no-cache">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style type="text/css">
    /** 基本定義 **/
    html {
        height: 100%;
        /* font. */
        font-family: '游ゴシック', YuGothic, 'メイリオ', Meiryo,
            'ヒラギノ角ゴ ProN W3', 'Hiragino Kaku Gothic ProN', Verdana,
            Roboto, 'Droid Sans', sans-serif;
        /* font-color */
        color: #4f4f4f;
        /* font bold. */
        font-weight: bold;
    }
    
    /** body基本定義 **/
    body {
        background:#f7f7f7;
    }
</style>

</head>
<!-- ログイン成功に対するリダイレクトを行う.-->
<body>
    [GAS]oauthログイン成功.<br>
    リダイレクトします.

    <!-- リダイレクト処理. -->
    <script>
        // アクセス元のURL.
        const SRC_ACCESS_URL = "<?= params.srcAccessUrl ?>";
        // メールアドレス.
        const MAIL = "<?= params.mail ?>";

        // redirect先のURLを作成する.
        let redirectURL = "<?= params.redirectUrl ?>";
        if(redirectURL.indexOf("?") == -1) {
            redirectURL += "?";
        } else {
            redirectURL += "&";
        }
        // oauth結果のmailアドレスをセット.
        redirectURL += "aOuthMail=" + encodeURIComponent(MAIL);
        // アクセス元のURLをセット.
        redirectURL += "&srcAccessUrl=" + encodeURIComponent(SRC_ACCESS_URL);

        // GETでredirectする.
        location.href = redirectURL;
    </script>

</body>    
</html>
